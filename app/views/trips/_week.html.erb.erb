<table id="week_calendar">
  <tr>
    <% @trips_by_date.keys.sort.each do |date| %>
      <%= tag 'td', {:id=>"day-cell#{date}"}, true %>
        <table class="day">
          <tr><th class="day_label"> <%= Date.parse(date).strftime("%a %d %b<br />%Y") %></th></tr>
          <% @trips_by_date[date].sort {|a,b| a.depart <=> b.depart}.each do |trip|  %>
            <tr>
              <%= content_tag 'td', "#{trip.destination} #{trip.depart.strftime("%I:%M%p")}",
                  {:class=>"week-trip #{trip.letter}"}%>
              </td>
            </tr>
          <% end %>
        </table>
      </td>
    <% end %>
    <td>
      <%= render :partial => 'destination_list' %>
    </td>
  </tr>
</table>
